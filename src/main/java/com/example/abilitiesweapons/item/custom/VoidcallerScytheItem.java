package com.example.abilitiesweapons.item.custom;import com.example.abilitiesweapons.AbilitiesWeaponsMod;import net.minecraft.entity.LivingEntity;import net.minecraft.entity.effect.StatusEffectInstance;import net.minecraft.entity.effect.StatusEffects;import net.minecraft.item.AxeItem;import net.minecraft.item.ItemTier;import net.minecraft.item.ItemStack;import net.minecraft.particle.ParticleTypes;import net.minecraft.server.world.ServerWorld;import net.minecraft.sound.SoundCategory;import net.minecraft.sound.SoundEvents;import net.minecraft.util.math.Box;import net.minecraft.util.math.Vec3d;import java.util.List;public class VoidcallerScytheItem extends AxeItem {public static final int COOLDOWN_TICKS = 20 * 20;public VoidcallerScytheItem(ItemTier toolMaterial, float attackDamage, float attackSpeed, Settings settings) {super(toolMaterial, attackDamage, attackSpeed, settings);}public void activateAbility(LivingEntity user) {if (user.getWorld().isClient()) return;ServerWorld world = (ServerWorld) user.getWorld();Vec3d userPos = user.getPos();double radius = 5.0;float damage = 4.0f;List<LivingEntity> entities = world.getEntitiesByClass(LivingEntity.class,new Box(userPos.getX() - radius, userPos.getY() - radius, userPos.getZ() - radius,userPos.getX() + radius, userPos.getY() + radius, userPos.getZ() + radius),entity -> entity != user && entity.isAlive() && entity.isAttackable());for (LivingEntity target : entities) {Vec3d targetPos = target.getPos();Vec3d direction = userPos.subtract(targetPos).normalize();target.addVelocity(direction.x * 0.8, direction.y * 0.5 + 0.2, direction.z * 0.8);target.damage(world.getDamageSources().magic(), damage);target.addStatusEffect(new StatusEffectInstance(StatusEffects.SLOWNESS, 60, 1));}world.spawnParticles(ParticleTypes.PORTAL, userPos.getX(), userPos.getY() + 1.0, userPos.getZ(),50, radius, radius, radius, 0.1);world.spawnParticles(ParticleTypes.SWEEP_ATTACK, userPos.getX(), userPos.getY() + 0.5, userPos.getZ(),5, 0.5, 0.5, 0.5, 0.0);world.playSound(null, userPos.getX(), userPos.getY(), userPos.getZ(), SoundEvents.ENTITY_ENDERMAN_TELEPORT, SoundCategory.PLAYERS, 1.0F, 0.8F + world.random.nextFloat() * 0.4F);world.playSound(null, userPos.getX(), userPos.getY(), userPos.getZ(), SoundEvents.BLOCK_PORTAL_AMBIENT, SoundCategory.PLAYERS, 0.5F, 0.8F + world.random.nextFloat() * 0.4F);if (user instanceof net.minecraft.entity.player.PlayerEntity player) {player.getItemCooldownManager().set(this, COOLDOWN_TICKS);}user.getMainHandStack().damage(1, user, (p) -> p.sendToolBreakStatus(user.getActiveHand()));}}